{% extends "rest/_layout" %}

{% block main %}

    <div class="container">
        <div class="row">
            <div class="col-md-6 col-md-offset-3">

                <h1>RunKeeper Activities</h1>

                {# {% set response = craft.rest.request({
                    url: 'https://api.runkeeper.com/fitnessActivities/443164165',
                    verb: 'get',
                    format: 'json',
                    identity: 'runkeeper',
                }) %} #}

                {% set response = craft.rest.request({
                    url: 'https://api.runkeeper.com/fitnessActivities',
                    verb: 'get',
                    format: 'json',
                    identity: 'runkeeper',
                }) %}

                {% if response.success %}
                    {% set data = response.data %}
                    {% set activities = data.items %}

                    {% for activity in activities %}
                        <hr>

                        <h3>{{ (activity.total_distance / 1000)|round(2) }} km</h3>
                        <p class="lead">{{ activity.type }}</p>

                        <ul>
                            <li>Total Distance: {{ activity.total_distance }}</li>
                            <li>Duration: {{ activity.duration }}</li>
                            <li>Total Calories: {{ activity.total_calories }}</li>
                            <li>Date: {{ activity.start_time }}</li>
                            <li>Entry Mode: {{ activity.entry_mode }}</li>
                        </ul>

                    {% endfor %}

                {% else %}

                    <p>
                        <strong>An error occured:</strong>
                        <pre>{{ dump(response.data) }}</pre>
                    </p>

                {% endif %}
            </div>
        </div>
    </div>

{% endblock %}
