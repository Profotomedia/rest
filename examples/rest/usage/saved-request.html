{% extends "rest/_layout" %}

{% block main %}

    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <h1>Sending a saved request</h1>

                <hr>

                <h3>Setup</h3>

                <p>For this example to work you need to create a REST request in the control panel with the following options:</p>

                <ul>
                    <li><strong>Name:</strong> YouTube Search</li>
                    <li><strong>Handle:</strong> youtubeSearch</li>
                    <li><strong>URL:</strong> https://www.googleapis.com/youtube/v3/search</li>
                    <li><strong>Query Parameters:</strong>
                        <ul>
                            <li><strong>part:</strong> snippet</li>
                            <li><strong>q:</strong> timelapse</li>
                        </ul>
                    </li>
                </ul>

                <h3>Template</h3>

                <pre>{{ "{% set response = craft.rest.request.handle('youtubeSearch').send() %}" }}</pre>

                <h3>Response</h3>

                {% set response = craft.rest.request.handle('youtubeSearch').send() %}

                {% if response.success %}

                    {% set data = response.data %}

                    <pre>{{ dump(data) }}</pre>

                {% else %}
                    {% include 'rest/_error' with { response: response } %}
                {% endif %}

            </div>
        </div>
    </div>

{% endblock %}
